webpackJsonp([1],{"+le7":function(t,e,o){"use strict";o.d(e,"g",function(){return u}),o.d(e,"a",function(){return p}),o.d(e,"e",function(){return c}),o.d(e,"c",function(){return h}),o.d(e,"f",function(){return f}),o.d(e,"d",function(){return y}),o.d(e,"b",function(){return g});var i=o("Gu7T"),n=o.n(i),r=o("rf6e"),s=100,l=30;function a(t){return t||(t=0),t.toString(16)+"-"+Date.now().toString(16)}function d(t,e,o){var i=t.nodes.filter(function(t){return"sub-system"!==t.type}),a=i.map(function(t){return{id:t.id}}),d=i.map(function(t){return t.id}),p=t.edges.map(function(t){return{source:d.indexOf(t.sourceNodeId),target:d.indexOf(t.targetNodeId)}}),u=Object(r.a)().nodeWidth(s).nodePadding(10).size([e,o]).nodes(a).links(p)().nodes,c=Math.max.apply(Math,[1].concat(n()(u.map(function(t){return t.depth})))),h=t.nodes.map(function(t){return t.id});return t.nodes.forEach(function(e,i){if("sub-system"!==e.type)t.nodes[i].x=parseInt(u[i].depth/c*o*.8),t.nodes[i].y=parseInt(.4*(u[i].x0+u[i].x1)),t.nodes[i].text.x=t.nodes[i].x+s/2,t.nodes[i].text.y=t.nodes[i].y;else{var r=function t(e,o,i,r,a,d,p){if("sub-system"!=i[a].type){var u=o.indexOf(i[a].id);return[parseInt(e[u].depth/d*p*.8)-s/2,parseInt(e[u].depth/d*p*.8)+s/2,parseInt(.4*(e[u].x0+e[u].x1))-l/2,parseInt(.4*(e[u].x0+e[u].x1))+l/2]}var c=i[a].children.map(function(n){return t(e,o,i,r,r.indexOf(n),d,p)});return[Math.min.apply(Math,n()(c.map(function(t){return t[0]})))-50,Math.max.apply(Math,n()(c.map(function(t){return t[1]})))+50,Math.min.apply(Math,n()(c.map(function(t){return t[2]})))-50,Math.max.apply(Math,n()(c.map(function(t){return t[3]})))+50]}(u,d,t.nodes,h,i,c,o);t.nodes[i].x=(r[0]+r[1])/2,t.nodes[i].y=(r[2]+r[3])/2,t.nodes[i].properties.nodeSize.width=r[1]-r[0],t.nodes[i].properties.nodeSize.height=r[3]-r[2]}}),t.edges.forEach(function(e,o){var i=h.indexOf(t.edges[o].sourceNodeId),n=h.indexOf(t.edges[o].targetNodeId);"switch-node"==t.nodes[i].type?(t.edges[o].startPoint.x=t.nodes[i].x+s/2,t.edges[o].startPoint.y=t.nodes[i].y,t.edges[o].endPoint.x=t.nodes[n].x,t.nodes[i].y>t.edges[o].endPoint.y?t.edges[o].endPoint.y=t.nodes[n].y+l/2:t.edges[o].endPoint.y=t.nodes[n].y-l/2,t.edges[o].pointsList=[]):(t.edges[o].startPoint.x=t.nodes[i].x+s/2,t.edges[o].startPoint.y=t.nodes[i].y,t.edges[o].endPoint.x=t.nodes[n].x-s/2,t.edges[o].endPoint.y=t.nodes[n].y,t.edges[o].pointsList=[])}),t}function p(t){var e=[],o=[],i={};return t.nodes.forEach(function(t){i[t.id]=t.text.value}),t.nodes.forEach(function(t){var o={text:t.text.value,type:t.type,showConfig:{position:{x:t.x,y:t.y},properties:t.properties}};"switch-node"==t.type?(o.control=i[t.properties.control],o.switchType=t.properties.normalState?"常闭":"常开"):"sub-system"==t.type&&(o.children=t.children.map(function(t){return i[t]})),e.push(o)}),t.edges.forEach(function(t){o.push({id:t.id,from:i[t.sourceNodeId],to:i[t.targetNodeId],type:t.type,showConfig:{startAnchor:t.startPoint,endAnchor:t.endPoint,interAnchors:t.pointsList,properties:t.properties}})}),{nodes:e,edges:o}}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"edit",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:900,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1200,n=[],r=[],l=[],p=0,u=!1;t.nodes.forEach(function(t){p+=1,l[t.text]=a(2*p)}),t.nodes.forEach(function(t){null!==t.showConfig.position.x&&void 0!==t.showConfig.position.x&&null!==t.showConfig.position.y&&void 0!==t.showConfig.position.y||(u=!0);var o={id:l[t.text],text:{value:t.text,x:t.showConfig.position.x+s/2,y:t.showConfig.position.y},type:t.type,x:t.showConfig.position.x,y:t.showConfig.position.y,properties:t.showConfig.properties};o.properties.showType=e,"check"===e?(o.properties.collision=t.collision,o.properties.fuzzible=t.fuzzible,o.properties.detectable=t.detectable):"analyse"===e&&(o.properties.state=t.state,o.properties.fuzzy_state=t.fuzzy_state),"switch-node"==t.type?(o.properties.control=l[t.control],o.properties.normalState=t.switchType.includes("闭")):"sub-system"==t.type&&(o.children=t.children.map(function(t){return l[t]})),n.push(o)}),t.edges.forEach(function(t){p+=1,r.push({id:l[t.from]+"-"+l[t.to]+"-"+a(2*p+1),sourceNodeId:l[t.from],targetNodeId:l[t.to],type:t.type,startPoint:t.showConfig.startAnchor,endPoint:t.showConfig.endAnchor,pointsList:t.showConfig.interAnchors,properties:t.showConfig.properties})});var c={nodes:n,edges:r};return u&&(c=d(c,o,i)),c}function c(t,e,o,i){return t?"rgb(255, 0, 0)":e?"rgb(0, 0, 255)":o?i:"rgb(150, 150, 150)"}function h(t,e,o){return null==e&&(e=0),null==o&&(o=.75),e*=o,null==t?"rgb(150, 150, 150)":t<.5?"rgb("+parseInt((1-e)*t*255+128*e)+","+parseInt(255*(1-e)+128*e)+","+parseInt(128*e)+")":"rgb("+parseInt(255*(1-e)+128*e)+","+parseInt((1-e)*(1-t)*255+128*e)+","+parseInt(128*e)+")"}function f(t,e,o,i){return t?"rgba(255, 0, 0, 0.45)":e?"rgba(0, 0, 255, 0.45)":o?i:"rgba(150, 150, 150, 0.45)"}function y(t,e,o){return null==e&&(e=0),null==o&&(o=.75),e*=o,null==t?"rgba(150, 150, 150, 0.45)":t<.5?"rgba("+parseInt((1-e)*t*255+128*e)+","+parseInt(255*(1-e)+128*e)+","+parseInt(128*e)+", 0.45)":"rgba("+parseInt(255*(1-e)+128*e)+","+parseInt((1-e)*(1-t)*255+128*e)+","+parseInt(128*e)+", 0.45)"}function g(t){if(!t)return 0;for(var e=0,o=0;o<t.length;o++){var i=t.charCodeAt(o);t.match(/[A-Z]/)?e+=1.5:e+=i>=1&&i<=126||i>=65376&&i<=65439?1:1.8}return e}},"2Il6":function(t,e,o){var i={"./SubSystem.js":"a9Io"};function n(t){return o(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}n.keys=function(){return Object.keys(i)},n.resolve=r,t.exports=n,n.id="2Il6"},"2LGs":function(t,e){},"4oUL":function(t,e,o){var i={"./CustomEdge.js":"e7zF"};function n(t){return o(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}n.keys=function(){return Object.keys(i)},n.resolve=r,t.exports=n,n.id="4oUL"},"7QVd":function(t,e){},"7zbF":function(t,e){},"8y2O":function(t,e){},MGcg:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=o("VU/8")({name:"App"},n,!1,function(t){o("2LGs")},null,null).exports,s=o("/ocq"),l=o("Dd8w"),a=o.n(l),d={showType:"edit",collision:!1,detectable:!0,fuzzible:!1,fuzzy_state:0,state:0},p=[{type:"test-node",text:"测试",properties:a()({},d,{icon:o("mrRX"),typeColor:"#eea2a4"})},{type:"fault-node",text:"故障",properties:a()({},d,{icon:o("mrRX"),typeColor:"#edc3ae",flevel:0})},{type:"switch-node",text:"开关",properties:a()({},d,{icon:o("mrRX"),typeColor:"#96c24e",normalState:!0,control:null})},{type:"algorithm-node",text:"算法",properties:a()({},d,{icon:o("mrRX"),typeColor:"#85C1E9",algorithm:0})}],u={type:"sub-system",text:"子系统",properties:a()({},d)},c={name:"NodePanel",props:{lf:Object,nodeList:Array},methods:{$_dragNode:function(t){this.$props.lf.dnd.startDrag({type:t.type,text:t.text,properties:t.properties})}}},h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"node-panel"},t._l(t.nodeList,function(e,i){return o("div",{key:i,staticClass:"red-ui-palette-node ui-draggable ui-draggable-handle",style:{backgroundColor:e.properties.typeColor},on:{mousedown:function(o){return t.$_dragNode(e)}}},[o("div",{staticClass:"red-ui-palette-label"},[t._v(t._s(e.text))]),t._v(" "),o("div",{staticClass:"red-ui-palette-icon-container"},[o("div",{staticClass:"red-ui-palette-icon",style:{backgroundImage:"url("+e.properties.icon+")"}})])])}),0)},staticRenderFns:[]};var f=o("VU/8")(c,h,!1,function(t){o("oi73")},null,null).exports,y=o("Gu7T"),g=o.n(y),m=o("//Fk"),v=o.n(m),_=o("mvHQ"),b=o.n(_),x=o("+le7"),w={zoomIn:!0,zoomOut:!0,zoomReset:!0,translateRest:!0,reset:!0,undo:!0,redo:!0,clear:!0,reDraw:!0,exportData:!0,importData:!0,importFMECA:!0,check:!0,optimizeCkpt:!0,analyse:!0},C={name:"Control",props:{lf:Object||String},data:function(){return{controlConfig:w,undoDisable:!0,redoDisable:!0,a:document.createElement("a"),fileName:"data",jsonText:"",reader:null,Visible:!1,dialogType:"check",result:{detect_isolat_radis:[1,1,1,1],col_names:[]}}},computed:{dialogTitle:function(){return this.dialogType,"信号流图模型评价"}},mounted:function(){var t=this;this.$props.lf.on("history:change",function(e){var o=e.data,i=o.undoAble,n=o.redoAble;t.$data.undoDisable=!i,t.$data.redoDisable=!n})},methods:{$_zoomIn:function(){this.$props.lf.zoom(!0)},$_zoomOut:function(){this.$props.lf.zoom(!1)},$_zoomReset:function(){this.$props.lf.resetZoom()},$_translateRest:function(){this.$props.lf.resetTranslate()},$_reset:function(){this.$props.lf.resetZoom(),this.$props.lf.resetTranslate()},$_undo:function(){this.$props.lf.undo()},$_redo:function(){this.$props.lf.redo()},$_clear:function(){this.$props.lf.clearData()},$_reDraw:function(){var t=this.$props.lf.getGraphRawData();t.nodes.forEach(function(t){t.properties.showType="edit"}),this.$props.lf.render(t)},$_exportData:function(){var t=this,e=Object(x.a)(this.$props.lf.getGraphData());this.$Modal.confirm({render:function(e){return e("Input",{props:{value:t.fileName,placeholder:"请输入文件名",autofocus:!0},on:{input:function(e){t.fileName=e}}})},onOk:function(){t.jsonText=b()(e,null,4),t.a.download=t.fileName+".json",t.a.href=window.URL.createObjectURL(new Blob([t.jsonText],{type:"text/json"})),t.a.dispatchEvent(new MouseEvent("click"))}})},$_importData:function(t){var e=this;return new v.a(function(o,i){"undefined"==typeof FileReader&&i("当前浏览器不支持FileReader"),e.reader=new FileReader,e.reader.readAsText(t.raw),e.reader.onerror=function(t){i("读取流图文件解析失败",t)},e.reader.onload=function(){if(e.reader.result)try{o(JSON.parse(e.reader.result))}catch(t){i("读取流图文件解析失败",t)}else i("读取流图文件解析失败",error)}}).then(function(t){var o=Object(x.g)(t);e.$props.lf.render(o)})},$_importFMECA:function(t){var e=this,o=new FormData;o.append("modelFile",t.raw),this.$axios({url:"/multi-info-edit/upload-fmeca/",method:"post",data:o}).then(function(t){console.log(t),e.$props.lf.render(Object(x.g)(t.data))})},$_optimizeCkpt:function(){var t=this,e=this.$props.lf.getGraphData();if(0===e.nodes.length)this.$alert("流图为空");else{var o=new FormData;o.append("graphStruct",b()(Object(x.a)(e))),this.$axios({url:"/multi-info-edit/optimize-graph/",method:"post",data:o}).then(function(e){console.log(e),t.$props.lf.render(Object(x.g)(e.data))})}},$_check:function(){var t=this,e=this.$props.lf.getGraphData();if(0===e.nodes.length)this.$alert("流图为空");else{var o=new FormData;o.append("graphStruct",b()(Object(x.a)(e))),this.$axios({url:"/multi-info-edit/check-graph/",method:"post",data:o}).then(function(e){console.log(e),t.dialogType="check",t.result.detect_isolat_radis=e.detect_isolat_radis,t.result.col_names=["raw_name"].concat(g()(e.col_names));var o=[];e.raw_names.forEach(function(t,i){var n={raw_name:t};e.D_mat[i].forEach(function(t,o){n[e.col_names[o]]=t}),o.push(n)}),t.result.D_mat=o,t.$props.lf.render(Object(x.g)(e.data,"check")),t.Visible=!0})}},$_analyse:function(t){var e=this,o=new FormData;o.append("graphStruct",b()(Object(x.a)(this.$props.lf.getGraphData()))),o.append("dataFile",t.raw),this.$axios({url:"/multi-info-analyse/analyse-data/",method:"post",data:o}).then(function(t){e.dialogType="analyse",e.$props.lf.render(Object(x.g)(t.data,"analyse"))})},$_test:function(){}}},A={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-button-group",[t.controlConfig.zoomIn?o("el-button",{attrs:{type:"plain",size:"small"},on:{click:t.$_zoomIn}},[t._v("放大")]):t._e(),t._v(" "),t.controlConfig.zoomOut?o("el-button",{attrs:{type:"plain",size:"small"},on:{click:t.$_zoomOut}},[t._v("缩小")]):t._e(),t._v(" "),t.controlConfig.zoomReset?o("el-button",{attrs:{type:"plain",size:"small"},on:{click:t.$_zoomReset}},[t._v("大小适应")]):t._e(),t._v(" "),t.controlConfig.translateRest?o("el-button",{attrs:{type:"plain",size:"small"},on:{click:t.$_translateRest}},[t._v("定位还原")]):t._e(),t._v(" "),t.controlConfig.reset?o("el-button",{attrs:{type:"plain",size:"small"},on:{click:t.$_reset}},[t._v("还原(大小&定位)")]):t._e(),t._v(" "),t.controlConfig.undo?o("el-button",{attrs:{type:"plain",size:"small",disabled:t.undoDisable},on:{click:t.$_undo}},[t._v("撤销(ctrl+z)")]):t._e(),t._v(" "),t.controlConfig.redo?o("el-button",{attrs:{type:"plain",size:"small",disabled:t.redoDisable},on:{click:t.$_redo}},[t._v("重做(ctrl+y)")]):t._e(),t._v(" "),t.controlConfig.clear?o("el-button",{attrs:{type:"plain",size:"small"},on:{click:t.$_clear}},[t._v("清空")]):t._e(),t._v(" "),t.controlConfig.reDraw?o("el-button",{attrs:{type:"plain",size:"small"},on:{click:t.$_reDraw}},[t._v("重绘")]):t._e(),t._v(" "),t.controlConfig.exportData?o("el-button",{attrs:{type:"plain",size:"small"},on:{click:t.$_exportData}},[t._v("导出流图")]):t._e()],1),t._v(" "),t.controlConfig.importData?o("el-upload",{staticStyle:{display:"inline-block","margin-left":"-5px"},attrs:{action:"","auto-upload":!1,accept:".json",multiple:!1,"show-file-list":!1,"on-change":t.$_importData}},[o("el-button",{attrs:{type:"plain",size:"small"}},[t._v("载入流图")])],1):t._e(),t._v(" "),t.controlConfig.importFMECA?o("el-upload",{staticStyle:{display:"inline-block","margin-left":"-5px"},attrs:{action:"","auto-upload":!1,accept:"application/vnd.ms-excel",multiple:!1,"show-file-list":!1,"on-change":t.$_importFMECA}},[o("el-button",{attrs:{type:"plain",size:"small"}},[t._v("载入FMECA")])],1):t._e(),t._v(" "),t.controlConfig.check?o("el-button",{staticStyle:{display:"inline-block","margin-left":"-5px"},attrs:{type:"plain",size:"small"},on:{click:t.$_check}},[t._v("流图评价")]):t._e(),t._v(" "),t.controlConfig.optimizeCkpt?o("el-button",{staticStyle:{display:"inline-block","margin-left":"-5px"},attrs:{type:"plain",size:"small"},on:{click:t.$_optimizeCkpt}},[t._v("测点优化")]):t._e(),t._v(" "),t.controlConfig.analyse?o("el-upload",{staticStyle:{display:"inline-block","margin-left":"-5px"},attrs:{action:"","auto-upload":!1,accept:".csv",multiple:!1,"show-file-list":!1,"on-change":t.$_analyse}},[o("el-button",{attrs:{type:"plain",size:"small"}},[t._v("故障分析")])],1):t._e(),t._v(" "),o("el-dialog",{attrs:{width:"60%",title:t.dialogTitle,visible:t.Visible,modal:!1},on:{"update:visible":function(e){t.Visible=e}}},["check"===t.dialogType?o("el-descriptions",{attrs:{title:"性能指标",column:3,border:""}},[o("el-descriptions-item",{attrs:{label:"检出率"}},[o("span",[t._v(t._s(t.result.detect_isolat_radis[0]))])]),t._v(" "),o("el-descriptions-item",{attrs:{label:"隔离率"}},[o("span",[t._v(t._s(t.result.detect_isolat_radis[1]))])]),t._v(" "),o("el-descriptions-item",{attrs:{label:"冗余度"}},[o("span",[t._v(t._s(t.result.detect_isolat_radis[2]))])])],1):t._e(),t._v(" "),"check"===t.dialogType?o("el-table",{attrs:{data:t.result.D_mat,size:"mini",border:""}},t._l(t.result.col_names,function(e){return o("el-table-column",{key:e,attrs:{label:"raw_name"===e?"":e,prop:e},scopedSlots:t._u([{key:"default",fn:function(i){return[1===i.row[e]?o("span",{staticStyle:{"background-color":"red",color:"white"}},[t._v(t._s(i.row[e]))]):o("span",[t._v(t._s(i.row[e]))])]}}],null,!0)})}),1):t._e()],1)],1)},staticRenderFns:[]};var k=o("VU/8")(C,A,!1,function(t){o("7zbF")},"data-v-8d395bc8",null).exports,L={name:"EditDialog",props:{dialogVisible:{type:Boolean},formData:{type:Object,required:!0}},data:function(){return{form:{text:{value:""},properties:{normalState:!0,flevel:0}},rules:{"text.value":[{required:!0,message:"请输入节点名称",trigger:"blur"}],"properties.flevel":[{required:!0,message:"请选择故障等级",trigger:"change"}],"properties.algorithm":[{required:!0,message:"请选择算法",trigger:"change"}]},faultLevelList:[{value:0,text:"无故障"},{value:1,text:"一级故障"},{value:2,text:"二级故障"},{value:3,text:"三级故障"}],algorithmList:[{value:0,text:"无算法"},{value:"lof",text:"离群因子算法"},{value:"dsPot",text:"漂移峰值阈值算法"}]}},computed:{},methods:{formDataUpdate:function(){var t=this;this.$refs.form.validate(function(e,o){e&&(t.$emit("data-update",t.form),t.closeDialog())})},closeDialog:function(){this.$emit("update:dialogVisible",!1)},openDialog:function(){this.form=a()({},this.formData)}},watch:{}},M={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:"编辑节点属性",width:"60%",visible:t.dialogVisible,"before-close":t.closeDialog},on:{"update:visible":function(e){t.dialogVisible=e},open:t.openDialog}},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[o("el-form-item",{attrs:{label:"ID",prop:"id","label-width":"120px"}},[o("el-input",{attrs:{disabled:!0},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"类型",prop:"type","label-width":"120px"}},[o("el-input",{attrs:{disabled:!0},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"名称",prop:"text.value","label-width":"120px"}},[o("el-input",{model:{value:t.form.text.value,callback:function(e){t.$set(t.form.text,"value",e)},expression:"form.text.value"}})],1),t._v(" "),"fault-node"===t.form.type?o("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"故障等级",prop:"properties.flevel","label-width":"120px"}},[o("el-select",{attrs:{placeholder:"请选择故障等级",clearable:""},model:{value:t.form.properties.flevel,callback:function(e){t.$set(t.form.properties,"flevel",e)},expression:"form.properties.flevel"}},t._l(t.faultLevelList,function(t){return o("el-option",{key:t.value,attrs:{label:t.text,value:t.value}})}),1)],1):t._e(),t._v(" "),"switch-node"===t.form.type?o("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"常闭/常开",prop:"properties.normalState","label-width":"120px"}},[o("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.form.properties.normalState,callback:function(e){t.$set(t.form.properties,"normalState",e)},expression:"form.properties.normalState"}})],1):t._e(),t._v(" "),"algorithm-node"===t.form.type?o("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"算法",prop:"properties.algorithm","label-width":"120px"}},[o("el-select",{attrs:{placeholder:"请选择算法",clearable:""},model:{value:t.form.properties.algorithm,callback:function(e){t.$set(t.form.properties,"algorithm",e)},expression:"form.properties.algorithm"}},t._l(t.algorithmList,function(t){return o("el-option",{key:t.value,attrs:{label:t.text,value:t.value}})}),1)],1):t._e()],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.formDataUpdate}},[t._v("确 定")])],1)],1)},staticRenderFns:[]},N=o("VU/8")(L,M,!1,null,null,null).exports,I=(o("rYsw"),o("VsE5"),o("rWy7")),S=o.n(I),z=(o("bgeU"),o("WKNW")),E={isSilentMode:!1,stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!0,adjustEdgeMiddle:!0,adjustEdgeStartAndEnd:!1,adjustNodePosition:!0,hideAnchors:!1,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1,metaKeyMultipleSelected:!1},j={enabled:!0},D={enabled:!0,size:10,visible:!0,type:"mesh",config:{color:"#eeeeee",thickness:1}},O={isWholeEdge:!0,isWholeNode:!0},T="custom-edge",P=o("d7EF"),F=o.n(P),$={createSub:function(){var t=this.lf.getSelectElements().nodes;if(0===t.length)this.$alert("未选中任何节点，无法创建子系统！");else{this.lf.clearSelectElements();var e=this.lf.extension.selectionSelect,o=e.startPoint,i=e.endPoint,n=this.lf.graphModel.transformModel,r=n.HtmlPointToCanvasPoint([o.x,o.y]),s=F()(r,2),l=s[0],d=s[1],p=n.HtmlPointToCanvasPoint([i.x,i.y]),c=F()(p,2),h=c[0]-l,f=c[1]-d,y=a()({},u);y.x=l+h/2,y.y=d+f/2,y.properties.nodeSize={width:h,height:f},y.children=t.map(function(t){return t.id}),this.lf.addNode(y),this.lf.render(this.$data.lf.getGraphRawData())}},foldAllChild:function(t){var e=this;t.forEach(function(t){var o=e.lf.graphModel.getNodeModelById(t);"sub-system"===o.type&&(!1===o.isFolded&&(e.foldAllChild(o.children),o.foldGroup(!0)),!0===o.isFolded&&(o.foldGroup(!1),e.foldAllChild(o.children),o.foldGroup(!0)))})},unfoldAllChild:function(t){var e=this;t.forEach(function(t){var o=e.lf.graphModel.getNodeModelById(t);"sub-system"===o.type&&(o.foldGroup(!1),e.unfoldAllChild(o.children))})}},W={$_LfEvent:function(){var t=this;this.lf.on("node:click",function(t){var e=t.data;console.log(e)}),this.lf.on("node:dbclick",function(e){var o=e.data;t.formData=o,t.dialogVisible=!0}),this.lf.on("node:edit",function(e){t.formData=e,t.dialogVisible=!0}),this.lf.on("node:mouseenter",function(e){var o=e.data;if("analyse"===o.properties.showType&&"sub-system"!==o.type){var i=t.lf.graphModel.transformModel.CanvasPointToHtmlPoint([o.x,o.y]),n=F()(i,2),r=n[0],s=n[1],l=r+150+o.properties.width/2,a=s-37,d=document.createElement("div");d.className="popper",d.style.left=l+"px",d.style.top=a+"px",d.innerHTML="\n          <p>名称: "+o.text.value+"</p>\n          <p>故障分数: "+100*o.properties.state+"</p>\n          <p>模糊分数: "+100*o.properties.fuzzy_state+"</p>\n        ",document.querySelector(".logic-flow-view").appendChild(d)}}),this.lf.on("node:mouseleave",function(t){var e=document.querySelector(".popper");e&&e.remove()}),this.lf.on("edge:delete",function(e){var o=e.data,i=t.lf.graphModel.getNodeModelById(o.targetNodeId);"switch-node"===i.type&&i.properties.control===o.sourceNodeId&&(i.properties.control=null)}),this.lf.on("anchor:drop",function(e){var o=e.edgeModel;if(t.lf.getEdgeModels({sourceNodeId:o.sourceNodeId,targetNodeId:o.targetNodeId}).length>1)t.$alert("重复连线"),t.lf.deleteEdge(o.id);else if(o.targetNodeId+"_top"===o.targetAnchorId||o.targetNodeId+"_bottom"===o.targetAnchorId){var i=t.lf.graphModel.getNodeModelById(o.targetNodeId);null===i.properties.control?i.properties.control=o.sourceNodeId:(t.$alert("该开关已有控制节点"),t.lf.deleteEdge(o.id))}}),this.lf.on("group:fold",function(e){!0===e.isFolded?(e.foldGroup(!1),t.foldAllChild(e.children),e.foldGroup(!0)):t.unfoldAllChild(e.children)})}},Z=o("TEyu"),U=[];Z.keys().forEach(function(t){U.push(Z(t))});var G=o("2Il6"),R=[];G.keys().forEach(function(t){R.push(G(t))});var B=o("4oUL"),V=[];B.keys().forEach(function(t){V.push(B(t))});var Y=a()({$_initLf:function(){var t=new S.a(a()({container:this.$refs.container},E,{keyboard:j,grid:!!D.enabled&&D,plugins:[z.d,z.b,z.f,z.a,z.e]}));this.lf=t,this.lf.extension.selectionSelect.setSelectionSense(O.isWholeEdge,O.isWholeNode),this.$_registerNode()},$_registerNode:function(){var t=this;U.forEach(function(e){t.lf.register(e.default)}),R.forEach(function(e){t.lf.register(e.default)}),V.forEach(function(e){t.lf.register(e.default)}),this.lf.setDefaultEdgeType(T),this.$_render()}},{$_render:function(){var t=this;this.lf.extension.menu.setMenuConfig({nodeMenu:[{text:"删除",callback:function(e){t.lf.deleteNode(e.id)}},{text:"编辑节点属性",callback:function(e){t.lf.graphModel.eventCenter.emit("node:edit",e)}}],edgeMenu:[{text:"删除",callback:function(e){t.lf.deleteEdge(e.id)}}]}),this.lf.extension.menu.setMenuByType({type:"lf:defaultSelectionMenu",menu:[{text:"删除",callback:function(e){e.nodes.map(function(e){t.lf.deleteNode(e.id)}),e.edges.map(function(e){t.lf.deleteEdge(e.id)})}},{text:"分组",callback:this.createSub}]}),this.lf.extension.menu.setMenuByType({type:"sub-system",menu:[{text:"删除子系统",callback:function(e){t.lf.deleteNode(e.id)}},{text:"解除子系统",callback:function(e){var o=t.lf.getNodeModelById(e.id);t.lf.getGraphRawData().nodes.some(function(o){if("sub-system"===o.type&&-1!==o.children.indexOf(e.id)){var i=t.lf.getNodeModelById(o.id);return e.children.forEach(function(t){i.addChild(t)}),!0}return!1}),e.children.forEach(function(t){o.removeChild(t)}),t.lf.deleteNode(e.id)}}]}),this.lf.extension.dndPanel.setPatternItems([{label:"选区",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAAOVJREFUOBGtVMENwzAIjKP++2026ETdpv10iy7WFbqFyyW6GBywLCv5gI+Dw2Bluj1znuSjhb99Gkn6QILDY2imo60p8nsnc9bEo3+QJ+AKHfMdZHnl78wyTnyHZD53Zzx73MRSgYvnqgCUHj6gwdck7Zsp1VOrz0Uz8NbKunzAW+Gu4fYW28bUYutYlzSa7B84Fh7d1kjLwhcSdYAYrdkMQVpsBr5XgDGuXwQfQr0y9zwLda+DUYXLaGKdd2ZTtvbolaO87pdo24hP7ov16N0zArH1ur3iwJpXxm+v7oAJNR4JEP8DoAuSFEkYH7cAAAAASUVORK5CYII=",callback:function(){t.lf.extension.selectionSelect.openSelectionSelect(),t.lf.once("selection:selected",function(){t.lf.extension.selectionSelect.closeSelectionSelect()})}},{label:"分组",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAAH6ji2bAAAABGdBTUEAALGPC/xhBQAAA1BJREFUOBFtVE1IVUEYPXOf+tq40Y3vPcmFIdSjIorWoRG0ERWUgnb5FwVhYQSl72oUoZAboxKNFtWiwKRN0M+jpfSzqJAQclHo001tKkjl3emc8V69igP3znzfnO/M9zcDcKT67azmjYWTwl9Vn7Vumeqzj1DVb6cleQY4oAVnIOPb+mKAGxQmKI5CWNJ2aLPatxWa3aB9K7/fB+/Z0jUF6TmMlFLQqrkECWQzOZxYGjTlOl8eeKaIY5yHnFn486xBustDjWT6dG7pmjHOJd+33t0iitTPkK6tEvjxq4h2MozQ6WFSX/LkDUGfFwfhEZj1Auz/U4pyAi5Sznd7uKzznXeVHlI/Aywmk6j7fsUsEuCGADrWARXXwjxWQsUbIupDHJI7kF5dRktg0eN81IbiZXiTESic50iwS+t1oJgL83jAiBupLDCQqwziaWSoAFSeIR3P5Xv5az00wyIn35QRYTwdSYbz8pH8fxUUAtxnFvYmEmgI0wYXUXcCCSpeEVpXlsRhBnCEATxWylL9+EKCAYhe1NGstUa6356kS9NVvt3DU2fd+Wtbm/+lSbylJqsqkSm9CRhvoJVlvKPvF1RKY/FcPn5j4UfIMLn8D4UYb54BNsilTDXKnF4CfTobA0FpoW/LSp306wkXM+XaOJhZaFkcNM82ASNAWMrhrUbRfmyeI1FvRBTpN06WKxa9BK0o2E4Pd3zfBBEwPsv9sQBnmLVbLEIZ/Xe9LYwJu/Er17W6HYVBc7vmuk0xUQ+pqxdom5Fnp55SiytXLPYoMXNM4u4SNSCFWnrVIzKG3EGyMXo6n/BQOe+bX3FClY4PwydVhthOZ9NnS+ntiLh0fxtlUJHAuGaFoVmttpVMeum0p3WEXbcll94l1wM/gZ0Ccczop77VvN2I7TlsZCsuXf1WHvWEhjO8DPtyOVg2/mvK9QqboEth+7pD6NUQC1HN/TwvydGBARi9MZSzLE4b8Ru3XhX2PBxf8E1er2A6516o0w4sIA+lwURhAON82Kwe2iDAC1Watq4XHaGQ7skLcFOtI5lDxuM2gZe6WFIotPAhbaeYlU4to5cuarF1QrcZ/lwrLaCJl66JBocYZnrNlvm2+MBCTmUymPrYZVbjdlr/BxlMjmNmNI3SAAAAAElFTkSuQmCC",callback:this.createSub}]),this.lf.render({}),this.$_LfEvent()}},W,$),H={name:"MSFG",components:{NodePanel:f,Control:k,EditDialog:N},data:function(){return{lf:null,dialogVisible:!1,nodeList:p,formData:{}}},mounted:function(){this.$_initLf()},methods:a()({},Y,{$_dataUpdate:function(t){var e=this.lf.graphModel.getNodeModelById(t.id);e.updateText(t.text.value),e.setProperties(a()({},t.properties))}})},X={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"logic-flow-view"},[t.lf?o("Control",{staticClass:"demo-control",attrs:{lf:t.lf}}):t._e(),t._v(" "),t.lf?o("NodePanel",{attrs:{lf:t.lf,nodeList:t.nodeList}}):t._e(),t._v(" "),o("div",{ref:"container",staticClass:"LF-view"}),t._v(" "),o("EditDialog",{attrs:{"dialog-visible":t.dialogVisible,"form-data":t.formData},on:{"update:dialogVisible":function(e){t.dialogVisible=e},"update:dialog-visible":function(e){t.dialogVisible=e},"data-update":t.$_dataUpdate}})],1)},staticRenderFns:[]};var q={components:{MSFG:o("VU/8")(H,X,!1,function(t){o("MGcg")},"data-v-8cc6b34e",null).exports},data:function(){return{}}},J={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main-box"},[e("MSFG")],1)},staticRenderFns:[]};var Q=o("VU/8")(q,J,!1,function(t){o("8y2O")},"data-v-5f8d7cd4",null).exports;i.default.use(s.a);var K=new s.a({routes:[{path:"/",name:"MultiProcess",component:Q}]}),tt=o("b3L9"),et=o.n(tt),ot=(o("7QVd"),o("zL8q")),it=o.n(ot),nt=(o("tvR6"),o("mtWM"));nt.a.defaults.baseURL="http://127.0.0.1:8000/",nt.a.defaults.timeout=5e3,nt.a.defaults.headers.post["Content-Type"]="multipart/form-data",nt.a.defaults.headers.post["Access-Control-Allow-Origin"]="*",nt.a.defaults.withCredentials=!1,nt.a.interceptors.request.use(function(t){return t},function(t){return v.a.reject(t)}),nt.a.interceptors.response.use(function(t){return t.data},function(t){return console.log(t),t.message.includes("timeout")?(Object(ot.Notification)({title:"发生错误",message:"网络超时,请求超过200s未有相应，请检查网络配置",type:"error",duration:0}),v.a.reject(t)):(Object(ot.Notification)({title:"发生错误",message:t.response.data.msg,type:"error",duration:0}),v.a.reject(t.response))});var rt=nt.a;i.default.use(it.a),i.default.use(et.a),i.default.config.productionTip=!1,i.default.prototype.$axios=rt,new i.default({el:"#app",router:K,components:{App:r},template:"<App/>"})},OnXr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Zx67"),n=o.n(i),r=o("Zrlr"),s=o.n(r),l=o("wxAW"),a=o.n(l),d=o("zwoO"),p=o.n(d),u=o("yEsh"),c=o.n(u),h=o("Pf15"),f=o.n(h),y=o("rWy7"),g=(o.n(y),o("qPqk")),m=function(t){function e(){return s()(this,e),p()(this,(e.__proto__||n()(e)).apply(this,arguments))}return f()(e,t),a()(e,[{key:"initNodeData",value:function(t){c()(e.prototype.__proto__||n()(e.prototype),"initNodeData",this).call(this,t)}},{key:"setAttributes",value:function(){c()(e.prototype.__proto__||n()(e.prototype),"setAttributes",this).call(this),this.properties.normalState?this.defaultFill="#96c24e":this.defaultFill="#E74C3C";this.sourceRules.push({message:"只允许从右边的锚点连出",validate:function(t,e,o,i){return"right"===o.type}}),this.targetRules.push({message:"只允许连接左边或上下两侧的锚点",validate:function(t,e,o,i){return"left"===i.type||"top"}})}},{key:"getDefaultAnchor",value:function(){var t=this.x,e=this.y,o=this.id,i=this.width,n=this.height;return[{x:t+i/2,y:e,id:o+"_right",type:"right"},{x:t-i/2,y:e,id:o+"_left",type:"left"},{x:t,y:e-n/2,id:o+"_top",type:"top"},{x:t,y:e+n/2,id:o+"_bottom",type:"bottom"}]}}]),e}(g.default.model),v=function(t){function e(){return s()(this,e),p()(this,(e.__proto__||n()(e)).apply(this,arguments))}return f()(e,t),e}(g.default.view);e.default={type:"switch-node",model:m,view:v}},TEyu:function(t,e,o){var i={"./AlgorithmNode.js":"UwmJ","./BaseNode.js":"qPqk","./FaultNode.js":"q9Is","./SwitchNode.js":"OnXr","./TestNode.js":"TqSG"};function n(t){return o(r(t))}function r(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}n.keys=function(){return Object.keys(i)},n.resolve=r,t.exports=n,n.id="TEyu"},TqSG:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Zx67"),n=o.n(i),r=o("Zrlr"),s=o.n(r),l=o("wxAW"),a=o.n(l),d=o("zwoO"),p=o.n(d),u=o("yEsh"),c=o.n(u),h=o("Pf15"),f=o.n(h),y=o("rWy7"),g=(o.n(y),o("qPqk")),m=function(t){function e(){return s()(this,e),p()(this,(e.__proto__||n()(e)).apply(this,arguments))}return f()(e,t),a()(e,[{key:"initNodeData",value:function(t){c()(e.prototype.__proto__||n()(e.prototype),"initNodeData",this).call(this,t)}},{key:"setAttributes",value:function(){c()(e.prototype.__proto__||n()(e.prototype),"setAttributes",this).call(this),this.targetRules.push({message:"只允许连接左边的锚点",validate:function(t,e,o,i){return"left"===i.type}})}},{key:"getDefaultAnchor",value:function(){var t=this.x,e=this.y,o=this.id,i=this.width;this.height;return[{x:t-i/2,y:e,id:o+"_left",type:"left"}]}}]),e}(g.default.model),v=function(t){function e(){return s()(this,e),p()(this,(e.__proto__||n()(e)).apply(this,arguments))}return f()(e,t),e}(g.default.view);e.default={type:"test-node",model:m,view:v}},UwmJ:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Zx67"),n=o.n(i),r=o("Zrlr"),s=o.n(r),l=o("wxAW"),a=o.n(l),d=o("zwoO"),p=o.n(d),u=o("yEsh"),c=o.n(u),h=o("Pf15"),f=o.n(h),y=o("rWy7"),g=(o.n(y),o("qPqk")),m=function(t){function e(){return s()(this,e),p()(this,(e.__proto__||n()(e)).apply(this,arguments))}return f()(e,t),a()(e,[{key:"initNodeData",value:function(t){c()(e.prototype.__proto__||n()(e.prototype),"initNodeData",this).call(this,t)}},{key:"setAttributes",value:function(){c()(e.prototype.__proto__||n()(e.prototype),"setAttributes",this).call(this);this.sourceRules.push({message:"只允许从右边的锚点连出",validate:function(t,e,o,i){return"right"===o.type}}),this.targetRules.push({message:"只允许连接左边的锚点",validate:function(t,e,o,i){return"left"===i.type}})}}]),e}(g.default.model),v=function(t){function e(){return s()(this,e),p()(this,(e.__proto__||n()(e)).apply(this,arguments))}return f()(e,t),e}(g.default.view);e.default={type:"algorithm-node",model:m,view:v}},VsE5:function(t,e){},a9Io:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Zx67"),n=o.n(i),r=o("Zrlr"),s=o.n(r),l=o("wxAW"),a=o.n(l),d=o("zwoO"),p=o.n(d),u=o("yEsh"),c=o.n(u),h=o("Pf15"),f=o.n(h),y=o("rWy7"),g=(o.n(y),o("WKNW")),m=o("+le7"),v=function(t){function e(){return s()(this,e),p()(this,(e.__proto__||n()(e)).apply(this,arguments))}return f()(e,t),a()(e,[{key:"initNodeData",value:function(t){var o=this;c()(e.prototype.__proto__||n()(e.prototype),"initNodeData",this).call(this,t),this.resizable=!0,this.foldable=!0,this.foldedWidth=175,this.foldedHeight=40;this.targetRules.push({message:"不允许直接连接到子系统",validate:function(){return!1}}),!0===t.properties.isFold&&setTimeout(function(){o.foldGroup(!0)})}},{key:"setAttributes",value:function(){this.text.x=this.x+10,this.isFolded?this.text.y=this.y:this.text.y=this.y-this.properties.nodeSize.height/2+14}},{key:"updateText",value:function(t){var o=t.replace(/\n/gm,"");c()(e.prototype.__proto__||n()(e.prototype),"updateText",this).call(this,o.slice(0,10))}},{key:"getNodeStyle",value:function(){var t=c()(e.prototype.__proto__||n()(e.prototype),"getNodeStyle",this).call(this);return t.stroke="#0998FF",t.strokeWidth=1,t.strokeDasharray="3 3","check"===this.properties.showType?t.fill=Object(m.f)(this.properties.collision,this.properties.fuzzible,this.properties.detectable,"rgba(239, 245, 255, 0.45)"):"analyse"===this.properties.showType?t.fill=Object(m.d)(this.properties.state,this.properties.fuzzy_state):t.fill="rgba(239, 245, 255, 0.45)",t}},{key:"getTextStyle",value:function(){var t=c()(e.prototype.__proto__||n()(e.prototype),"getTextStyle",this).call(this);return t.fontSize=14,t.color="#3C96FE",t.fontWeight=600,t.lineHeight=16,t}},{key:"foldGroup",value:function(t){c()(e.prototype.__proto__||n()(e.prototype),"foldGroup",this).call(this,t),t?(this.text.x=this.x+10,this.text.y=this.y):(this.width=this.properties.nodeSize.width,this.height=this.properties.nodeSize.height,this.text.x=this.x+10,this.text.y=this.y-this.height/2+14)}},{key:"deleteGroup",value:function(){this.graphModel.deleteNode(this.id)}},{key:"getData",value:function(){var t=c()(e.prototype.__proto__||n()(e.prototype),"getData",this).call(this);return this.isFolded?(t.x=t.x+this.unfoldedWidth/2-this.width/2,t.y=t.y+this.unfoldedHight/2-this.height/2,t.properties.isFold=this.isFolded,t.width=this.unfoldedWidth,t.height=this.unfoldedHight):(t.properties.isFold=this.isFolded,t.width=this.width,t.height=this.height),t}}]),e}(g.c.model),_=function(t){function e(){return s()(this,e),p()(this,(e.__proto__||n()(e)).apply(this,arguments))}return f()(e,t),a()(e,[{key:"getFoldIcon",value:function(){var t=this.props,e=t.model,o=t.graphModel,i=e.x-e.width/2+5,n=e.y-e.height/2+5;if(!e.foldable)return null;var r=Object(y.h)("svg",{transform:"translate(329.000000, 311.000000)",x:i,y:n,width:20,height:20,fill:"#3C96FE"},[Object(y.h)("path",{"pointer-events":"none",d:"M10.5097656,8.61914062 L16.8066406,2.32226563 C16.8554688,2.2734375 16.8203125,2.18945313 16.7519531,2.18945313 L13.6035156,2.18945313 C13.2636719,2.18945313 12.9746094,1.921875 12.9648438,1.58203125 C12.9550781,1.22851563 13.2382813,0.939453125 13.5898438,0.939453125 L18.4492188,0.939453125 C18.7949219,0.939453125 19.0742188,1.21875 19.0742188,1.56445313 L19.0742188,6.41015625 C19.0742188,6.75 18.8066406,7.0390625 18.4667969,7.04882813 C18.1132813,7.05859375 17.8242188,6.77539063 17.8242188,6.42382813 L17.8242188,3.25976563 C17.8242188,3.18945313 17.7402344,3.15625 17.6914063,3.20507813 L11.3925781,9.50195312 C11.1484375,9.74609375 10.7519531,9.74609375 10.5078125,9.50195312 C10.265625,9.2578125 10.265625,8.86328125 10.5097656,8.61914062 Z M0.921875,18.4375 L0.921875,13.5917969 C0.921875,13.2519531 1.18945312,12.9628906 1.52929688,12.953125 C1.8828125,12.9433594 2.171875,13.2265625 2.171875,13.578125 L2.171875,16.7402344 C2.171875,16.8105469 2.25585938,16.84375 2.3046875,16.7949219 L8.6015625,10.4980469 C8.72460938,10.375 8.8828125,10.3144531 9.04296875,10.3144531 C9.203125,10.3144531 9.36328125,10.375 9.484375,10.4980469 C9.72851562,10.7421875 9.72851562,11.1386719 9.484375,11.3828125 L3.18945312,17.6796875 C3.140625,17.7285156 3.17578125,17.8125 3.24414063,17.8125 L6.39257812,17.8125 C6.73242187,17.8125 7.02148438,18.0800781 7.03125,18.4199219 C7.04101562,18.7734375 6.7578125,19.0625 6.40625,19.0625 L1.546875,19.0625 C1.20117188,19.0625 0.921875,18.7832031 0.921875,18.4375 Z M1.25,6.875 L0,6.875 L0,0 L6.875,0 L6.875,1.25 L1.25,1.25 L1.25,6.875 Z M20,20 L13.125,20 L13.125,18.75 L18.75,18.75 L18.75,13.125 L20,13.125 L20,20 Z"})]),s=Object(y.h)("svg",{transform:"translate(330.000000, 495.000000)",x:i,y:n,width:20,height:20,fill:"#3C96FE"},[Object(y.h)("path",{"pointer-events":"none",d:"M18.890625,2.00390625 L12.59375,8.30273438 C12.5449219,8.3515625 12.5800781,8.43554688 12.6484375,8.43554688 L15.796875,8.43554688 C16.1367187,8.43554688 16.4257812,8.703125 16.4355469,9.04296875 C16.4453125,9.39648438 16.1621094,9.68554688 15.8105469,9.68554688 L10.9511719,9.68554688 C10.6054687,9.68554688 10.3261719,9.40625 10.3261719,9.06054688 L10.3261719,4.21484375 C10.3261719,3.875 10.59375,3.5859375 10.9335938,3.57617188 C11.2871094,3.56640625 11.5761719,3.84960938 11.5761719,4.20117188 L11.5761719,7.36328125 C11.5761719,7.43359375 11.6601562,7.46679688 11.7089844,7.41796875 L18.0078125,1.12109375 C18.2519531,0.876953125 18.6484375,0.876953125 18.8925781,1.12109375 C19.1347656,1.36523438 19.1347656,1.75976562 18.890625,2.00390625 L18.890625,2.00390625 Z M9.66992188,10.9394531 L9.66992188,15.7851562 C9.66992188,16.125 9.40234375,16.4140625 9.0625,16.4238281 C8.70898438,16.4335938 8.41992188,16.1503906 8.41992188,15.7988281 L8.41992188,12.6367188 C8.41992188,12.5664062 8.3359375,12.5332031 8.28710938,12.5820312 L1.98828125,18.8789062 C1.86523438,19.0019531 1.70703125,19.0625 1.546875,19.0625 C1.38671875,19.0625 1.2265625,19.0019531 1.10546875,18.8789062 C0.861328125,18.6347656 0.861328125,18.2382812 1.10546875,17.9941406 L7.40234375,11.6972656 C7.45117188,11.6484375 7.41601563,11.5644531 7.34765625,11.5644531 L4.19921875,11.5644531 C3.859375,11.5644531 3.5703125,11.296875 3.56054688,10.9570312 C3.55078125,10.6035156 3.83398438,10.3144531 4.18554688,10.3144531 L9.04492188,10.3144531 C9.390625,10.3144531 9.66992188,10.59375 9.66992188,10.9394531 Z M1.25,6.875 L0,6.875 L0,0 L6.875,0 L6.875,1.25 L1.25,1.25 L1.25,6.875 Z M20,20 L13.125,20 L13.125,18.75 L18.75,18.75 L18.75,13.125 L20,13.125 L20,20 Z"})]);return Object(y.h)("g",{},[Object(y.h)("rect",{height:20,width:20,rx:2,ry:2,strokeWidth:1,fill:"transparent",stroke:"transparent",cursor:"pointer",x:e.x-e.width/2+5,y:e.y-e.height/2+5,onClick:function(){e.foldGroup(!e.properties.isFolded),o.eventCenter.emit("group:fold",e)}}),e.properties.isFolded?r:s])}},{key:"getDeleteIcon",value:function(){var t=this.props.model;return Object(y.h)("g",{},[Object(y.h)("rect",{height:20,width:20,rx:2,ry:2,strokeWidth:1,fill:"transparent",stroke:"transparent",cursor:"pointer",x:t.x+t.width/2+14,y:t.y-t.height/2+5,onClick:function(){t.deleteGroup()}}),Object(y.h)("svg",{transform:"translate(1.000000, 1.000000)",fill:"#3C96FE",x:t.x+t.width/2+14,y:t.y-t.height/2+5,width:20,height:20},[Object(y.h)("path",{"pointer-events":"none",d:"M15.3,1.4 L12.6,1.4 L12.6,0 L5.4,0 L5.4,1.4 L0,1.4 L0,2.8 L2,2.8 L2,17.3 C2,17.6865993 2.31340068,18 2.7,18 L15.3,18 C15.6865993,18 16,17.6865993 16,17.3 L16,2.8 L18,2.8 L18,1.4 L15.3,1.4 Z M14.6,16.6 L3.4,16.6 L3.4,2.8 L14.6,2.8 L14.6,16.6 Z"}),Object(y.h)("path",{"pointer-events":"none",d:"M6,5.4 L7.4,5.4 L7.4,14.4 L6,14.4 L6,5.4 Z M10.6,5.4 L12,5.4 L12,14.4 L10.6,14.4 L10.6,5.4 Z"})])])}},{key:"getResizeShape",value:function(){return Object(y.h)("g",{},[c()(e.prototype.__proto__||n()(e.prototype),"getResizeShape",this).call(this),this.getDeleteIcon()])}}]),e}(g.c.view);e.default={type:"sub-system",model:v,view:_}},bgeU:function(t,e){},e7zF:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("d7EF"),n=o.n(i),r=o("Zx67"),s=o.n(r),l=o("Zrlr"),a=o.n(l),d=o("wxAW"),p=o.n(d),u=o("zwoO"),c=o.n(u),h=o("yEsh"),f=o.n(h),y=o("Pf15"),g=o.n(y),m=o("rWy7"),v=(o.n(m),function(t){function e(){var t,o,i,n;a()(this,e);for(var r=arguments.length,l=Array(r),d=0;d<r;d++)l[d]=arguments[d];return o=i=c()(this,(t=e.__proto__||s()(e)).call.apply(t,[this].concat(l))),i.customTextPosition=!0,n=o,c()(i,n)}return g()(e,t),p()(e,[{key:"getTextStyle",value:function(){var t=f()(e.prototype.__proto__||s()(e.prototype),"getTextStyle",this).call(this);return t.className="custom-text",t}},{key:"getTextPosition",value:function(){var t=f()(e.prototype.__proto__||s()(e.prototype),"getTextPosition",this).call(this),o=this.points.split(" "),i=[];if(o&&o.forEach(function(t){var e=t.split(","),o=n()(e,2),r=o[0],s=o[1];i.push({x:Number(r),y:Number(s)})}),o.length>1){var r=o[0].split(","),l=n()(r,2),a=l[0],d=l[1],p=o[1].split(","),u=n()(p,2),c=u[0],h=u[1],y=50;a=Number(a),d=Number(d),c=Number(c),h=Number(h),a===c?(h<d&&(y=-50),t.y=d+y,t.x=a):(c<a&&(y=-50),t.x=a+y,t.y=d-10)}return t}},{key:"setAttributes",value:function(){this.isAnimation=!0}},{key:"getEdgeAnimationStyle",value:function(){var t=f()(e.prototype.__proto__||s()(e.prototype),"getEdgeAnimationStyle",this).call(this);return t.strokeDasharray="5 5",t.animationDuration="100s",t}}]),e}(m.PolylineEdgeModel)),_=function(t){function e(){return a()(this,e),c()(this,(e.__proto__||s()(e)).apply(this,arguments))}return g()(e,t),e}(m.PolylineEdge);e.default={type:"custom-edge",model:v,view:_}},mrRX:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAsIDAsIDQwLCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBjb2xvcj0iIzAwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTU0MCAtOTg3LjM2KSI+PHBhdGggZD0iTTU2NS40MyAxMDAxLjljNi41NjIgMi4wODkgMTEuMzE2IDguMjMzIDExLjMxNiAxNS40ODggMCA4Ljk3NS03LjI3NSAxNi4yNS0xNi4yNSAxNi4yNXMtMTYuMjUtNy4yNzUtMTYuMjUtMTYuMjVjMC0yLjgwMi43MS01LjQzOCAxLjk1OC03Ljc0IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHlsZT0iaXNvbGF0aW9uOmF1dG87bWl4LWJsZW5kLW1vZGU6bm9ybWFsIi8+PGNpcmNsZSBjeD0iNTYwIiBjeT0iMTAwMS40IiByPSIxLjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjMiIHN0eWxlPSJpc29sYXRpb246YXV0bzttaXgtYmxlbmQtbW9kZTpub3JtYWwiLz48cGF0aCBkPSJNNTYwIDEwMTQuNGMtMS4yMDYgMC0xMS0xMC45OTktMTIuMzU0LTkuOTc1UzU1NyAxMDE2LjE0OCA1NTcgMTAxNy40czEuMzYgMyAzIDMgMy0xLjM2MSAzLTMtMS43OTQtMy0zLTN6IiBmaWxsPSIjZmZmIi8+PC9nPjwvc3ZnPgo="},oi73:function(t,e){},q9Is:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Zx67"),n=o.n(i),r=o("Zrlr"),s=o.n(r),l=o("wxAW"),a=o.n(l),d=o("zwoO"),p=o.n(d),u=o("yEsh"),c=o.n(u),h=o("Pf15"),f=o.n(h),y=o("rWy7"),g=(o.n(y),o("qPqk")),m=function(t){function e(){return s()(this,e),p()(this,(e.__proto__||n()(e)).apply(this,arguments))}return f()(e,t),a()(e,[{key:"initNodeData",value:function(t){c()(e.prototype.__proto__||n()(e.prototype),"initNodeData",this).call(this,t)}},{key:"setAttributes",value:function(){c()(e.prototype.__proto__||n()(e.prototype),"setAttributes",this).call(this);this.sourceRules.push({message:"只允许从右边的锚点连出",validate:function(t,e,o,i){return"right"===o.type}}),this.targetRules.push({message:"只允许连接左边的锚点",validate:function(t,e,o,i){return"left"===i.type}})}}]),e}(g.default.model),v=function(t){function e(){return s()(this,e),p()(this,(e.__proto__||n()(e)).apply(this,arguments))}return f()(e,t),e}(g.default.view);e.default={type:"fault-node",model:m,view:v}},qPqk:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("Dd8w"),n=o.n(i),r=o("Zx67"),s=o.n(r),l=o("Zrlr"),a=o.n(l),d=o("wxAW"),p=o.n(d),u=o("zwoO"),c=o.n(u),h=o("yEsh"),f=o.n(h),y=o("Pf15"),g=o.n(y),m=o("rWy7"),v=(o.n(m),o("+le7")),_=function(t){function e(){return a()(this,e),c()(this,(e.__proto__||s()(e)).apply(this,arguments))}return g()(e,t),p()(e,[{key:"initNodeData",value:function(t){f()(e.prototype.__proto__||s()(e.prototype),"initNodeData",this).call(this,t),this.width=100,this.height=30,this.radius=5,this.iconPosition="",this.defaultFill=this.properties.typeColor}},{key:"setAttributes",value:function(){if(this.text.value){var t=30+9*Object(v.b)(this.text.value);(t=20*Math.ceil(t/20))<100&&(t=100),this.width=t,this.properties.width=t}this.text.x=this.x+10,this.text.y=this.y,"check"===this.properties.showType?this.defaultFill=Object(v.e)(this.properties.collision,this.properties.fuzzible,this.properties.detectable,this.properties.typeColor):"analyse"===this.properties.showType&&(this.defaultFill=Object(v.c)(this.properties.state,this.properties.fuzzy_state))}},{key:"updateText",value:function(t){f()(e.prototype.__proto__||s()(e.prototype),"updateText",this).call(this,t),this.setAttributes()}},{key:"getNodeStyle",value:function(){var t=f()(e.prototype.__proto__||s()(e.prototype),"getNodeStyle",this).call(this),o=this.properties.style||{};return this.isSelected?(t.strokeWidth=Number(o.borderWidth)||2,t.stroke=o.borderColor||"#ff7f0e"):(t.strokeWidth=Number(o.borderWidth)||1,t.stroke=o.borderColor||"#999"),t.fill=o.backgroundColor||this.defaultFill,t}},{key:"getDefaultAnchor",value:function(){var t=this.x,e=this.y,o=this.id,i=this.width;this.height;return[{x:t+i/2,y:e,id:o+"_right",type:"right"},{x:t-i/2,y:e,id:o+"_left",type:"left"}]}},{key:"getOutlineStyle",value:function(){var t=f()(e.prototype.__proto__||s()(e.prototype),"getOutlineStyle",this).call(this);return t.stroke="transparent",t.hover.stroke="transparent",t}},{key:"getData",value:function(){var t=f()(e.prototype.__proto__||s()(e.prototype),"getData",this).call(this);return t.properties.ui="node-red",t}}]),e}(m.RectNodeModel),b=function(t){function e(){return a()(this,e),c()(this,(e.__proto__||s()(e)).apply(this,arguments))}return g()(e,t),p()(e,[{key:"getAnchorShape",value:function(t){var e=t.x,o=t.y;t.type;return Object(m.h)("rect",{x:e-5,y:o-5,width:10,height:10,className:"custom-anchor"})}},{key:"getShape",value:function(){var t=this.props.model,e=(t.text,t.x),o=t.y,i=t.width,r=t.height,s=t.radius,l=this.props.model.getNodeStyle();return Object(m.h)("g",{className:"lf-red-node"},[Object(m.h)("rect",n()({},l,{x:e-i/2,y:o-r/2,width:i,height:r,rx:s,ry:s})),Object(m.h)("g",{style:"pointer-events: none",transform:"translate("+e+", "+o+")"},[Object(m.h)("rect",{x:-i/2,y:-r/2,width:30,height:30,fill:"#000",fillOpacity:.05,stroke:"none"}),this.getIcon(),Object(m.h)("path",{d:"M "+(30-i/2)+" "+(1-r/2)+" l 0 28",stroke:"#000",strokeOpacity:.1,strokeWidth:1})])])}},{key:"getIcon",value:function(){var t=this.props.model,e=t.width,o=t.height;return Object(m.h)("image",{width:30,height:30,x:-e/2,y:-o/2,href:this.props.model.properties.icon})}}]),e}(m.RectNode);e.default={type:"red-node",model:_,view:b}},rYsw:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.3db61b4a7048f6b60b51.js.map